---

################################################################################
# Network interfaces
################################################################################

# The protocol, hostname/IP and port the Vault server should listen on
#
# This may be overridden if the public Vault API endpoint is exposed via a load
# balancer on a different port/protocol.
ansible_vault_listen_protocol: "{{ ansible_vault_public_url | urlsplit('scheme') }}"
ansible_vault_listen_address: "0.0.0.0"
ansible_vault_listen_port: >-
  {{
    ansible_vault_public_url
      | urlsplit('port')
      | default(443 if ansible_vault_listen_protocol == "https" else 80)
      | int
  }}


# The Vault clustering API URL
ansible_vault_clustering_url: >-
  https://{{
    ansible_host | default(inventory_hostname)
  }}:8201


# The listening address and port used for the Vault clustering API endpoint.
#
# This may be overridden if the public Vault clustering API endpoint is exposed
# via a load balancer on a different port/protocol.
ansible_vault_clustering_address: "0.0.0.0"
ansible_vault_clustering_port: >-
  {{
    ansible_vault_clustering_url
      | urlsplit('port')
      | default(8201)
      | int
  }}


################################################################################
# Certificates
################################################################################

# If ansible_vault_listen_protocol is 'https', a certificate and key file must
# be specified
ansible_vault_tls_cert_file: "{{ ansible_vault_data_dir }}/tls.crt"
ansible_vault_tls_key_file: "{{ ansible_vault_data_dir }}/tls.key"
